<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to CCHIC critical care data • rOpenSci: cleanEHR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../ropensci.css" rel="stylesheet">
<meta property="og:title" content="Introduction to CCHIC critical care data">
<meta property="og:description" content="cleanEHR">
<meta name="twitter:card" content="summary">
<!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
        <a class="navbar-brand" href="../index.html"><i>cleanEHR <small>v1.0</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/cchic_overview.html">Introduction to CCHIC critical care data</a>
    </li>
    <li>
      <a href="../articles/data_clean.html">Data cleaning and wrangling with cleanEHR</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/ropensci/cleanEHR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to CCHIC critical care data</h1>
                        <h4 class="author">David Perez Suarez &amp; Sinan Shi</h4>
            
            <h4 class="date">2021-07-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/cleanEHR/blob/master/vignettes/cchic_overview.Rmd"><code>vignettes/cchic_overview.Rmd</code></a></small>
      <div class="hidden name"><code>cchic_overview.Rmd</code></div>

    </div>

    
    
<p>CCHIC data strongly impacts the design of cleanEHR. Complex, heterogeneous, and high resolution longitudinal data is a trend of EHR analysis, which takes advantage of the ever more sophisticated statistical techniques and growing computation capability. CCHIC is a representative example database of such kind. It records 263 fields including 154 time-varying fields of patients during their stay in intensive care units across five NHS trusts in England. The recorded variables include patient demographics, time of admission and discharge, survival status, diagnosis, physiology, laboratory, nursing and drug. The latest database contains 22,628 admissions from 2014 to 2016, with about 119 million data points (~6k per patient).</p>
<p>The anonymised data subset can be obtained <a href="https://form.jotformeu.com/drstevok/cchic-end-user-license---cleanEHR">here</a>. The selected number of researchers can get the access to the identifiable data <a href="http://www.ucl.ac.uk/isd/itforslms/services/handling-sens-data/tech-soln">UCL IDHS</a>.</p>
<div id="episode-and-icu-stay-timeline" class="section level3">
<h3 class="hasAnchor">
<a href="#episode-and-icu-stay-timeline" class="anchor"></a>Episode and ICU stay timeline</h3>
<p>We introduced the concept of ‘episode’ as the fundamental entity of EHRs, which comprises all the data being recorded during the ICU stay. Each episode also contains the demographic information of the patient, ward transferring origin and destination within a hospital and diagnosis information. It allows us to link episode data from a single patient across the entire multi-centre database. The key dates and times are recorded as follow. <img src="cchic_timeline.png" width="480" height="360"></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/cleanEHR">cleanEHR</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"sample_ccd"</span><span class="op">)</span>

<span class="co"># Extract all non-longitudinal data (demographic, time, survival status, diagnosis)</span>
<span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ccd_demographic_table.html">ccd_demographic_table</a></span><span class="op">(</span><span class="va">ccd</span>, dtype<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><code>ccd_demographic_table</code> function returns a table of all non-time-varying fields alongside with several derived fields – the fields that are not directly recorded in the original data. Each row of the table is a unique admission, and every column is a non-time-varying data field.</p>
<ul>
<li>
<code>pid</code>: unique patient ID derived from NHS number or PAS number.</li>
<li>
<code>AGE</code>: date of birth - unit admission time</li>
<li>
<code>spell</code>: see <em>Spell</em>
</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">dt</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>##          ICNNO bed02 bed03 bed05 bed50 NHSNO pasno ADNO  DOB PCODE GPCODE
## 1: pseudo_site  NULL  NULL  NULL  NULL  NULL  NULL    1 NULL  WC1E   NULL
## 2: pseudo_site  NULL  NULL  NULL  NULL  NULL  NULL    2 NULL  NULL   NULL
## 3: pseudo_site  NULL  NULL  NULL  NULL  NULL  NULL    3 NULL  NULL   NULL
##    ETHNIC SEX   HCM HCMEST WKG WKGEST        DAH               DAICU DWFRD
## 1:      C   F 164.7      N  41      N 1969-12-12 1970-01-01T01:00:00  NULL
## 2:      L   F    NA      Y  73      Y 1969-12-24 1970-01-01T01:00:00  NULL
## 3:      A   F    NA      Y  45      Y 1970-01-01 1970-01-01T01:00:00  NULL
##    TWFRD DDICU DUDICU  DDH DUDH UDIS RESA HLOCA LOCA PA_V3 SCODE CLASSNS CCL2D
## 1:  NULL  NULL   NULL NULL NULL NULL    M     S    W     L   370    NULL     1
## 2:  NULL  NULL   NULL NULL NULL NULL    M     S    W     L   350    NULL     2
## 3:  NULL  NULL   NULL NULL NULL NULL    M     S    E     L   303    NULL     0
##    CCL3D RDIS_V3 LOCD TNESSD LEVD DIS DOAH SOHA PLOCA TUADNO DOAICU TUIDI
## 1:     0    NULL NULL   NULL NULL   D NULL NULL  NULL     NA   NULL  NULL
## 2:    21    NULL NULL   NULL NULL   D NULL NULL  NULL     NA   NULL  NULL
## 3:     1    NULL NULL   NULL NULL   D NULL NULL     N     NA   NULL  NULL
##    TYPEIHA  TGA  CCA      DLCCA HLOCD SOHD TYPEIHD  TGD HDIS  CCD DFCCD
## 1:    NULL NULL    O 1969-12-31  NULL NULL    NULL NULL NULL NULL  NULL
## 2:    NULL NULL    N       NULL  NULL NULL    NULL NULL NULL NULL  NULL
## 3:    NULL NULL NULL       NULL  NULL NULL    NULL NULL NULL NULL  NULL
##    DESTH_V3 RESD UHDIS PSP CPR_V3 RAICU1 RAICU2 URAICU CHEMOX RADIOX CICIDS
## 1:     NULL NULL  NULL   0      N   NULL   NULL   NULL      0      0      0
## 2:     NULL NULL  NULL   0      N   NULL   NULL   NULL      0      0      0
## 3:     NULL NULL  NULL   0      N   NULL   NULL   NULL      0      0      0
##    AMLALLMM CMLCLL LYM META CRRX BPC HE PH AIDS_V3 HV SRD STERX VSCD OCPMH DEP
## 1:        0      0   0    1    0   0  0  0       0  0   0     0    0         N
## 2:        0      0   0    0    0   0  0  0    NULL  0   0     0    0         A
## 3:        1      0   0    0    0   0  0  0       0  0   0     0    0 2.4.2   A
##    apache_score apache_prob TNESSA DHRS AMUAI ORGAN_SUPPORT ARSD BRSD ACSD BCSD
## 1:           18       31.17      T   NA  NULL             1    0    1    0    0
## 2:           12       15.87      T   NA     0             4   21    1    3   20
## 3:           53       99.69      T   NA  NULL             3    1    0    0    1
##    RSD NSD LSD DSD GSD ITW_V3        DTW   TTW BSDTP DDBSD TDBSD        DOD
## 1:   0   0   0   0   1      N       NULL  NULL     0  NULL  NULL 1970-01-01
## 2:   0   2   0   0  21      N       NULL  NULL     0  NULL  NULL 1970-01-22
## 3:   0   1   0   0   0      W 2014-02-05 17:39     0  NULL  NULL 1970-01-01
##      TOD REFOD OD_V3 DBRICU TBRICU pid spell   AGE index
## 1: 13:55     1     N   NULL  15:30  20    23  &lt;NA&gt;     1
## 2: 11:20     1     N   NULL  15:00  22    25 49.75     2
## 3: 19:17     1     N   NULL  21:00  26    30  &lt;NA&gt;     3</code></pre>
<p>Data missing are caused by many reasons. We have to understand that in such a large database, the data quality varies. In the anonymised dataset, data can be missing due to security reason. Missing data are either NULL or “NA” depending on the field data type.</p>
</div>
<div id="demographic-data" class="section level3">
<h3 class="hasAnchor">
<a href="#demographic-data" class="anchor"></a>Demographic data</h3>
<p>Every patient in England has a unique NHS number and PAS (Patient Admission System) number. These can be used to identify a unique patient. Other demographic information can also be found in the CCHIC dataset such as age, sex, GP code, postcode and so on. Most of the demographic data will be removed, pseudonimised, or modified in the anonymised dataset to protect the patient privacy.</p>
</div>
<div id="spell" class="section level3">
<h3 class="hasAnchor">
<a href="#spell" class="anchor"></a>Spell</h3>
<p>Ward transferring within or beyond ICUs are counted as different episodes respectively. In some research, one may be interested in looking at the sickness development and the treatment history beyond each ICU stays. A spell includes number of episodes from a unique patient which occured in a user defined period One can link episodes by spell ID.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/ccd_unique_spell.html">ccd_unique_spell</a></span><span class="op">(</span><span class="va">ccd</span>, duration<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"episode_id"</span>, <span class="st">"spell"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>##    episode_id spell
## 1:          1     1
## 2:          2     2
## 3:          3     3
## 4:          4     4
## 5:          5     5
## 6:          6     6</code></pre>
</div>
<div id="diagnosis-data" class="section level3">
<h3 class="hasAnchor">
<a href="#diagnosis-data" class="anchor"></a>Diagnosis data</h3>
<p>Instead of using free text, we adopted <a href="https://www.icnarc.org/Our-Audit/Audits/Cmp/Resources/Icm-Icnarc-Coding-Method">ICNARC diagnosis</a> code system to record the diagnosis. The full ICNARC code is a five digit number separated with dots. From left to right each digit represents a higher category of diagnosis. Due to the privacy concerns, in the anonysmised dataset, last two digits will be removed. One may use the function <code>icnarc2diagnosis</code> to look up the diagnosis code.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/icnarc2diagnosis.html">icnarc2diagnosis</a></span><span class="op">(</span><span class="st">"1.1"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Respiratory (Surgical)"</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/icnarc2diagnosis.html">icnarc2diagnosis</a></span><span class="op">(</span><span class="st">"1.1.4"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Lungs (Surgical)"</code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/icnarc2diagnosis.html">icnarc2diagnosis</a></span><span class="op">(</span><span class="st">"1.1.4.27.1"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Bacterial pneumonia (Surgical)"</code></pre>
</div>
<div id="longitudinal-data" class="section level3">
<h3 class="hasAnchor">
<a href="#longitudinal-data" class="anchor"></a>Longitudinal data</h3>
<p>CCHIC measures 154 longitudinal data. The full list of longitudinal data are shown below. <img src="item_ref.png" width="480" height="360"></p>
<p>We can also easily plot the data from a single selected admission.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_episode.html">plot_episode</a></span><span class="op">(</span><span class="va">ccd</span><span class="op">@</span><span class="va">episodes</span><span class="op">[[</span><span class="fl">7</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"h_rate"</span>,  <span class="st">"bilirubin"</span>, <span class="st">"fluid_balance_d"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="cchic_overview_files/figure-html/unnamed-chunk-5-1.png" width="700px"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review">Software Review Process</a></li>
                            <li><a href="https://ropensci.org/about#team">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate">Donate</a></li>
                            <li><a href="https://ropensci.org/contact">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/">Documentation</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '799829e946e1f0f9cd5b5a782c6316b9',
    indexName: 'ropensci-cleanehr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
